@page "/list/{ListId:int}"

<PageTitle>Task Display</PageTitle>

<MudText Align="Align.Center">
    <h1>Task Display</h1>
</MudText>

<MudGrid Justify="Justify.Center">
    <MudItem md="8" xl="6">
        @if (CurrentList == null)
        {
            <p>Loading...</p>
        }
        else
        {
            <MudText Typo="Typo.h6" GutterBottom="false" Align="Align.Left" Style="margin-left: 10px; margin-top: 25px"> <b>@CurrentList.Name</b></MudText>
            //... rest of your component
        }
        
            @if (HasTasks)
            {
                <MudStack Spacing="2">
                    @foreach (var task in PendingTasks)
                    {
                        <TaskChunk
                            Task="@task"
                            OnDelete="HandleDeleteTask"
                            OnEdit="HandleEditTask"
                            OnStartEdit="StartEdit"
                            OnCheck="(() => HandleCheckTask(task))">
                        </TaskChunk>                        
                    }
                </MudStack>
            }
            else
            {
                <MudText Align="Align.Center" Typo="Typo.overline" Style="margin-left: 10px">
                    There are no pending tasks
                </MudText>
            }
       
    </MudItem>
</MudGrid>

<MudGrid Justify="Justify.Center">
    <MudItem md="8" xl="6">
        <MudPaper Width="100%" Elevation="3" Square="false" Style="margin-top: 10px; margin-bottom: 50px">
            <MudGrid Justify="Justify.Center">
               
                <MudItem md="8">
                    <MudTextField @bind-Value="NewTask.Description" Label="Enter a new task" Variant="Variant.Outlined" Clearable="true" Style="margin-top: 10px; margin-bottom: 10px"></MudTextField>
                </MudItem>

                @if(NewTask.DueDetails == null)
                {
                NewTask.DueDetails = new DueDetails();
                }
                <MudItem md="3">
                    <MudDatePicker Label="Due Date" @bind-Date="NewTask.DueDetails.DueDate" DisableToolbar="false" PickerVariant="PickerVariant.Dialog" />
                </MudItem>
                <MudGrid Justify="Justify.Center">
                    <MudItem md="9">
                    </MudItem>
                    <MudItem md="3" Style="margin-left: -80px; margin-top: -40px">
                        <MudTimePicker PickerVariant="PickerVariant.Dialog" Label="Due Time" AmPm="true" @bind-Time="NewTask.DueDetails.DueTime" />
                    </MudItem>
                </MudGrid>              
                
            </MudGrid>
            <MudGrid Justify="Justify.Center">
                <MudItem md="12">
                </MudItem>
                <MudItem md="3">
                    <MudButton OnClick="HandleCreateTask" Style="margin-top:-50px" Variant=" Variant.Filled" Color="Color.Success" Size=Size.Medium StartIcon="@Icons.Material.Rounded.AddCircleOutline">Add Task</MudButton>
                </MudItem>
            </MudGrid>
        </MudPaper>
    </MudItem>
</MudGrid>
